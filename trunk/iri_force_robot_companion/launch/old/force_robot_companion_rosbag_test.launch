<!-- -->

<launch>

  <param name="/use_sim_time" value="True"/>
	<node  pkg="rosbag" 
        type="play" 
        name="rosbag" 
        args="--pause -l --clock $(find iri_force_robot_companion)/data.bag" />

  <group ns="$(env ROBOT)">

<!--
    <node pkg ="wiimote"
          type="wiimote_node.py"
          name="joy"
          respawn="true">
      <remap from="/$(env ROBOT)/joy"
               to="/$(env ROBOT)/sensors/joy"/>
    </node>
-->


  <include file="$(find iri_laser_people_detection)/launch/iri_laser_people_detection_frontrear.launch">
  </include>
  
  <!-- People Tracker -->
    <!-- published topics:  /$(env ROBOT)/people_tracking/peopleSet -->
    <!-- subscribed topics: /$(env ROBOT)/people -->
    <!--                    /$(env ROBOT)/segway/odom -->
    <!-- service clients: -->
    <!-- service servers: -->
    <!-- action clients: -->
    <!-- action servers: /$(env ROBOT)/people_tracking/people_tracking -->
  <include file="$(find iri_people_tracking)/launch/iri_people_tracking.launch">
  </include>
  

    <!-- Force robot companion -->
      <!-- published topics:  -->
      <!-- subscribed topics: /$(env ROBOT)/people_tracking/peopleSet -->
      <!--                    /$(env ROBOT)/sensors/joy -->
      <!--                    /$(env ROBOT)/sensors/front_laser_scan -->
      <!-- service clients: -->
      <!-- service servers: -->
      <!-- action clients:  /$(env ROBOT)/no_collision/MoveBase -->
      <!-- action servers: -->
    <node pkg ="iri_force_robot_companion"
          type="iri_force_robot_companion"
          name="force_robot_companion"
          output="screen">
			<param name="move_base" value="False"/>
			<param name="robot_sim" value="False"/>
			<param name="using_prediction" value="True"/>
			<param name="time_horizon" value="2.0"/>
			<param name="reference_frame" value="map"/>
			<param name="v_max" value="1.0"/>
			<param name="v_cruise" value="0.7"/>
			<param name="force_parameters" value="True"/>
			<param name="force_goal" value="0.3"/>
			<param name="force_toperson" value="0.7"/>
			<param name="force_interaction" value="4.0"/>
			<param name="force_laser" value="0.5"/>
			<param name="laser_radi" value="40.0"/>
			<param name="force_map" value="0.5"/>
			<param name="r" value="1.5"/>
			<param name="theta" value="45.0"/>
			<param name="force_map_path" value="$(find iri_force_robot_companion)/map/noforce_map.txt" />
			<param name="B_obstacle" value="0.65"/>
          <remap from="/$(env ROBOT)/force_robot_companion/tracks"
                    to="/$(env ROBOT)/people_tracking/peopleSet" />
          <remap from="/$(env ROBOT)/move_base"
                    to="/$(env ROBOT)/no_collision/MoveBase" />
          <remap from="/$(env ROBOT)/force_robot_companion/laser"
                    to="/$(env ROBOT)/sensors/front_laser_scan" />
    </node>

  </group>



  <node pkg ="rviz" 
        name="rviz" 
        type="rviz" 
        args="-d $(find iri_force_robot_companion)/config/tibi_force_robot_companion.vcg"
         />

</launch>


